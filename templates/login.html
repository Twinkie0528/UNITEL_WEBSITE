<!DOCTYPE html>
<html lang="mn">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Unitel AI Hub — Нэвтрэх</title>

  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;600;700&display=swap" rel="stylesheet">

  <style>
    :root{
      --green:#00b140; --green2:#008a31; --bg:#f8fafc; --card:#fff;
      --ink:#1f2937; --muted:#64748b; --border:#e2e8f0;
      --shadow:0 10px 20px rgba(0,0,0,.06);
    }
    *{box-sizing:border-box; margin:0; padding:0}
    html,body{height:100%}
    body{
      font-family:Montserrat,system-ui,-apple-system,"Segoe UI",Roboto,Arial,sans-serif;
      background:var(--bg); color:var(--ink); display:grid; place-items:center;
      -webkit-font-smoothing:antialiased; -moz-osx-font-smoothing:grayscale;
    }
    .panel{
      width:100%; max-width:900px; margin:20px; display:grid; grid-template-columns:1.1fr .9fr;
      background:var(--card); border:1px solid var(--border); border-radius:24px; overflow:hidden; box-shadow:var(--shadow);
    }
    .form{
      padding:48px; display:flex; flex-direction:column; justify-content:center;
    }
    .logo{height:36px; margin-bottom:24px}
    h1{font-size:28px; margin-bottom:6px}
    .sub{color:var(--muted); margin-bottom:24px}
    .input-group{position:relative; margin-bottom:16px}
    .icon{position:absolute; left:14px; top:50%; transform:translateY(-50%); color:#94a3b8}
    .input{
      width:100%; padding:14px 16px 14px 46px; border:1px solid var(--border); border-radius:12px; font:inherit;
    }
    .input:focus{outline:none; border-color:var(--green); box-shadow:0 0 0 4px rgba(0,177,64,.12)}
    .toggle{
      position:absolute; right:12px; top:50%; transform:translateY(-50%); border:none; background:none; color:var(--muted); cursor:pointer;
    }
    .actions{display:flex; justify-content:space-between; align-items:center; margin:6px 0 18px; font-size:14px}
    .actions label{display:flex; align-items:center; gap:8px; color:var(--muted); cursor:pointer}
    .actions a{color:var(--green); font-weight:700; text-decoration:none}
    .actions a:hover{text-decoration:underline}
    .btn{
      width:100%; padding:14px 16px; border-radius:12px; border:1px solid var(--green);
      background:var(--green); color:#fff; font-weight:800; cursor:pointer; box-shadow:0 10px 18px -8px rgba(0,177,64,.35);
    }
    .btn:hover{filter:brightness(1.05)}
    .error{
      margin:0 0 14px; padding:10px 12px; border-radius:12px; background:#fee2e2; color:#7f1d1d; border:1px solid #fecaca; font-weight:700; font-size:13px;
    }

    .brand{
      background:linear-gradient(160deg,var(--green),var(--green2)); color:#fff; padding:48px; position:relative; display:flex; flex-direction:column; justify-content:center;
    }
    .brand h2{font-size:32px; line-height:1.2; margin-bottom:10px}
    .brand p{opacity:.9}
    .brand:before,.brand:after{
      content:''; position:absolute; border-radius:50%; opacity:.18; background:radial-gradient(circle,#fff,transparent 70%);
      animation:pulse 10s infinite alternate;
    }
    .brand:before{width:380px;height:380px;top:-100px;right:-140px}
    .brand:after{width:300px;height:300px;bottom:-80px;left:-90px;animation-delay:-5s}
    @keyframes pulse{0%{transform:scale(.9)}100%{transform:scale(1.1)}}

    @media (max-width:900px){ .panel{grid-template-columns:1fr; max-width:480px} .brand{display:none} .form{padding:32px} }
  </style>
</head>
<body>

  <div class="panel">
    <div class="form">
      <img src="/static/images/unitel-logo.png" alt="Unitel" class="logo">
      <h1>Тавтай морил!</h1>
      <p class="sub">Unitel AI Hub-д нэвтэрнэ үү.</p>

      {% if error %}<div class="error">{{ error }}</div>{% endif %}

      <!-- login → Flask /login ; next параметрийг дамжуулна -->
      <form method="POST" action="{{ url_for('login', next=request.args.get('next','')) }}" novalidate>
        <div class="input-group">
          <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M17 18a2 2 0 0 0-2-2H9a2 2 0 0 0-2 2"/><rect x="3" y="4" width="18" height="18" rx="2"/><path d="M12 8v4"/><path d="M12 16h.01"/></svg>
          </span>
          <input type="email" class="input" name="email" autocomplete="username"
                 placeholder="Имэйл (name@unitel.mn)" value="{{ email|default('') }}" required>
        </div>

        <div class="input-group">
          <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"></rect><path d="M7 11V7a5 5 0 0 1 10 0v4"></path></svg>
          </span>
          <input type="password" class="input" id="password" name="password" autocomplete="current-password"
                 placeholder="Нууц үг" required>
          <button type="button" class="toggle" id="togglePw" aria-label="Нууц үг харах">Харах</button>
        </div>

        <!-- (Сонголт) 2FA идэвхтэй хэрэглэгчдэд -->
        <div class="input-group">
          <span class="icon">
            <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M9 7h6"/><path d="M12 17v.01"/><rect x="3" y="3" width="18" height="18" rx="2"/></svg>
          </span>
          <input type="text" class="input" name="otp" inputmode="numeric" pattern="[0-9]*" maxlength="6"
                 placeholder="OTP (2FA — идэвхтэй бол бөглөнө)">
        </div>

        <div class="actions">
          <!-- OTP-г 30 хоног санах сонголт -->
          <label><input type="checkbox" name="remember_device" value="1"> Энэ төхөөрөмж дээр OTP-г 30 хоног санах</label>
          <a href="#" onclick="alert('Нууц үг сэргээхийг админ хариуцна.');return false;">Тусламж</a>
        </div>

        <button class="btn" type="submit">Нэвтрэх</button>
      </form>
    </div>

    <div class="brand">
      <h2>Өгөгдөлд суурилсан шийдвэр.</h2>
      <p>AI туслахын тусламжтайгаар маркетингийн ажлаа хурдасгаж, үр дүнгээ хэмжээрэй.</p>
    </div>
  </div>

  <script>
    // Autofocus
    const email = document.querySelector('input[name="email"]');
    if (email && !email.value) email.focus();

    // Toggle password
    const pw = document.getElementById('password');
    const t = document.getElementById('togglePw');
    if (pw && t) {
      t.addEventListener('click', ()=>{
        const show = pw.type === 'password';
        pw.type = show ? 'text' : 'password';
        t.textContent = show ? 'Нуух' : 'Харах';
        pw.focus();
      });
    }
  </script>
</body>
</html>
